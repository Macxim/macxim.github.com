---
lang: en
type: collections
layout: default
---

### Bug! 

While browsing and developing the app, I noticed that my computer's fans were going crazy.

<a href="/assets/img/rma-0028-fans.gif"><img src="/assets/img/rma-0028-fans.gif" width=""></a>

I decided to do a simple `console.log` of the API call and...

<a href="/assets/img/rma-0028-bug.jpg"><img src="/assets/img/rma-0028-bug.jpg" width=""></a>

Infinite loop 😍

What's happening here?  
This occurs only in the homepage `/`. Chances are that the bug is in `Discover` component.

The problem is with `componentDidUpdate()`. Let's break it down what happens once it's called. 

componentDidUpdate()  
&nbsp;&nbsp;  -> getMovies()  
&nbsp;&nbsp;&nbsp;  -> setMovies()  
&nbsp;&nbsp;&nbsp;&nbsp;  -> setState()  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  -> **componentDidUpdate()** again 😱💥  

Each time the state is changed, `componentDidUpdate()` is called. And through `getMovies` and `setMovies`, the state is changed. Hence the ∞ loop. 

To fix it, let's [simply check if the props have changed](https://github.com/Macxim/eiga/commit/f5b0e8208c78eef57b73398249d42ef698cf2c1c#diff-3d0ba6a46be102955794a06ff7a5c60fR24). 

**Reference commit**: [f5b0e82](https://github.com/Macxim/eiga/commit/f5b0e8208c78eef57b73398249d42ef698cf2c1c)
