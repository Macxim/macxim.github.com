---
lang: en
type: collections
layout: default
---

As expected, some refactoring is needed.

Here we will set up the Release Date filter. We don't want a range here. A simple dropdown will be enough. I started installing [a simple Dropdown component](https://github.com/fraserxu/react-dropdown).

We set the default state [to the current year here](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104#diff-14b1e33d5bf5649597cdc0e4f684daddR29). For more clarity, I renamed the `updateFilters()` function to `updateStateWithFilters()` as it had the same name as the one in the `Filter` component. It was confusing.

This function has changed, we pass it an object and use it to directy set the new state.

Back to the `Filter` component, we populate the dropdown [with a list of years](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104#diff-5b20e9db52bc24bb7a20379466b2e68cR14) from [1900 to the current year](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104#diff-5b20e9db52bc24bb7a20379466b2e68cR36). 

For each `onChange` function (in every filter), [here](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104#diff-5b20e9db52bc24bb7a20379466b2e68cR38) and [here](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104#diff-5b20e9db52bc24bb7a20379466b2e68cR28), we create an updated version of the filters object. It receives the filters as a prop, so we can do an immutable update on that prop, and pass the updated version to `updateFilters`. I have had a hard time with this part to be honest.


**Reference commit**: [f56587e](https://github.com/Macxim/eiga/commit/f56587ebadb8bf9691f9f59ce76c7d0fe4026104)
