---
lang: en
type: collections
layout: default
---

Regarding the list of movies, there is one missing feature from the wireframe I did in [#1](#1): the button to load more movies (more pages, actually).

[Let's do it!](https://github.com/Macxim/eiga/commit/ecb238ffacdb1b1e229c850969a2f776b2b1e03a)

First, [we create a button component](https://github.com/Macxim/eiga/commit/ecb238ffacdb1b1e229c850969a2f776b2b1e03a#diff-bbc6749162635fba28ca5450c9a99830) with a few props for the text, the class and the onClick handler.

Second, let's take a [look at the API](https://developers.themoviedb.org/3/search/search-movies), we can see that the response from the getMovies() request is the following:

<a href="/assets/img/rma-0017-response.jpg"><img src="/assets/img/rma-0017-response.jpg" width="450"></a>

It returns more than the array of results. There are also the `page`, the `total_results` and the `total_pages`. We are going to use this to load more movies. We will need two more constants in [our api.js file](https://github.com/Macxim/eiga/commit/ecb238ffacdb1b1e229c850969a2f776b2b1e03a#diff-284817f1b6aad47c0ac6d61bd72f474c).

Third, we [adjust the API call](https://github.com/Macxim/eiga/blob/ecb238ffacdb1b1e229c850969a2f776b2b1e03a/src/components/Main/index.js#L24) with these new parameters.

Finally, the most important part is [in the setMovies() function](https://github.com/Macxim/eiga/blob/ecb238ffacdb1b1e229c850969a2f776b2b1e03a/src/components/Main/index.js#L29-L44). We get the results and the page data from the request, we check if there are already results: if the page is different from 1 (the first page), there has to be results already in our state. Then, we use the array spread operator to concatenate the old results with the new ones and ultimately we update the state. ðŸ˜µ That was kind of a lot to process.

The best part is that this change is applied in all sections (Popular, Top Rated, Coming Soon) thanks to the reusability of React components.

Now we have another issue, this is not working for the search because the API called isn't made in `<Main />` but in the `<SearchBar />` component.

**Reference commit**: [ecb238f](https://github.com/Macxim/eiga/commit/ecb238ffacdb1b1e229c850969a2f776b2b1e03a)
